(this.webpackJsonpdiagraming=this.webpackJsonpdiagraming||[]).push([[0],[,,,,,,,,function(t,e,n){},,function(t,e,n){t.exports=n(17)},,,,,function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var i=n(0),o=n.n(i),a=n(9),c=n.n(a),r=(n(15),n(2)),y=n(1),h=n(3),s=n(4),l=n(6),d=n(5),p=(n(16),n(8),function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(h.a)(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))).dragging=!1,t.initialX=0,t.initialY=0,t.handleContextMenu=function(e){var n=t.props;(0,n.onContextMenu)(n.widget.id,e)},t.handleDragStart=function(e){var n=t.props;(0,n.onDragStart)(n.widget.id,e)},t}return Object(s.a)(n,[{key:"render",value:function(){var t=this.props,e=t.cursor,n=t.selected,i=t.widget,a=i.x,c=i.y;return o.a.createElement("div",{onContextMenu:this.handleContextMenu,onMouseDown:this.handleDragStart,style:{top:c,left:a,cursor:"crosshair"===e?"crosshair":"pointer",border:n?"2px solid blue":"none"},className:"Sticky"})}}]),n}(o.a.Component)),x=n(19),g=function(t){return{id:x.a(),height:100,width:100,type:"sticky",x:(t.x||0)-50,y:(t.y||0)-50}},u=function(t){return{id:x.a(),height:0,width:0,type:"arrow",x:(t.x||0)-25,y:(t.y||0)-25,start:t.start||null,end:t.end||null,points:[]}},w=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){return Object(h.a)(this,n),e.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return o.a.createElement("svg",{style:{position:"absolute",top:0,left:0,pointerEvents:"none"},xmlns:"http://www.w3.org/2000/svg",version:"1.1"},function(t){var e=t[0],n=t[1];if("right"===e.type||"left"===e.type){if(e.y===n.y){var i="M ".concat(e.x," ").concat(e.y," L ").concat(n.x," ").concat(n.y);return[o.a.createElement("path",{d:i,stroke:"red",strokeWidth:"2",fill:"none"}),o.a.createElement("circle",{cx:"".concat(n.x),cy:"".concat(n.y),r:"5",stroke:"#5cb85c",fill:"#5cb85c"})]}var a=(n.x-e.x)/2,c="M ".concat(e.x," ").concat(e.y," L ").concat(e.x+a," ").concat(e.y),r="M ".concat(e.x+a," ").concat(e.y," L ").concat(e.x+a," ").concat(n.y),y="M ".concat(e.x+a," ").concat(n.y," L ").concat(n.x," ").concat(n.y);return[o.a.createElement("path",{d:c,stroke:"red",strokeWidth:"2",fill:"none"}),o.a.createElement("path",{d:r,stroke:"red",strokeWidth:"2",fill:"none"}),o.a.createElement("path",{d:y,stroke:"red",strokeWidth:"2",fill:"none"}),o.a.createElement("circle",{cx:"".concat(n.x),cy:"".concat(n.y),r:"5",stroke:"#5cb85c",fill:"#5cb85c"})]}if(e.x===n.x){var h="M ".concat(e.x," ").concat(e.y," L ").concat(n.x," ").concat(n.y);return[o.a.createElement("path",{d:h,stroke:"red",strokeWidth:"2",fill:"none"}),o.a.createElement("circle",{cx:"".concat(n.x),cy:"".concat(n.y),r:"5",stroke:"#5cb85c",fill:"#5cb85c"})]}var s=(n.y-e.y)/2,l="M ".concat(e.x," ").concat(e.y," L ").concat(e.x," ").concat(e.y+s),d="M ".concat(e.x," ").concat(e.y+s," L ").concat(n.x," ").concat(e.y+s),p="M ".concat(n.x," ").concat(e.y+s," L ").concat(n.x," ").concat(n.y);return[o.a.createElement("path",{d:l,stroke:"red",strokeWidth:"2",fill:"none"}),o.a.createElement("path",{d:d,stroke:"red",strokeWidth:"2",fill:"none"}),o.a.createElement("path",{d:p,stroke:"red",strokeWidth:"2",fill:"none"}),o.a.createElement("circle",{cx:"".concat(n.x),cy:"".concat(n.y),r:"5",stroke:"#5cb85c",fill:"#5cb85c"})]}(this.props.widget.points))}}]),n}(o.a.PureComponent),f=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(h.a)(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))).ref=null,t.state={cursor:"auto",dragging:null,initialId:null,initialX:null,initialY:null,selected:null,widgets:{}},t.handleContextMenu=function(e,n){n.preventDefault(),n.stopPropagation(),t.state.initialId?t.state.initialId!==e?t.setState((function(t){var n=t.widgets[t.initialId||""],i=t.widgets[e],o=[],a=Object(y.a)(Object(y.a)({},u({start:t.initialId,end:e})),{},{points:o}),c=Math.abs((n.x-i.x)/(n.y-i.y));return n.x+n.width+10<i.x?c>1?(o[0]={x:n.x+n.width,y:n.y+n.height/2,type:"right"},o[1]={x:i.x,y:i.y+i.height/2,type:"left"}):n.y+n.height+10<i.y?(o[0]={x:n.x+n.width/2,y:n.y+n.height,type:"bottom"},o[1]={x:i.x+i.width/2,y:i.y,type:"top"}):(o[0]={x:n.x+n.width/2,y:n.y,type:"top"},o[1]={x:i.x+i.width/2,y:i.y+i.height,type:"bottom"}):c>1?(o[0]={x:n.x,y:n.y+n.height/2,type:"left"},o[1]={x:i.x+i.width,y:i.y+i.height/2,type:"right"}):n.y+n.height+10<i.y?(o[0]={x:n.x+n.width/2,y:n.y+n.height,type:"bottom"},o[1]={x:i.x+i.width/2,y:i.y,type:"top"}):(o[0]={x:n.x+n.width/2,y:n.y,type:"top"},o[1]={x:i.x+i.width/2,y:i.y+i.height,type:"bottom"}),Object(y.a)(Object(y.a)({},t),{},{cursor:"auto",initialId:null,widgets:Object(y.a)(Object(y.a)({},t.widgets),{},Object(r.a)({},a.id,a))})})):t.setState({initialId:null,cursor:"auto"}):t.setState({initialId:e,cursor:"crosshair"})},t.handleDoubleClick=function(e){var n=g({x:e.clientX,y:e.clientY});t.setState((function(t){return{selected:n.id,widgets:Object(y.a)(Object(y.a)({},t.widgets),{},Object(r.a)({},n.id,n))}}))},t.handleDrag=function(e){var n=e.clientX,i=e.clientY;t.setState((function(t){if(!t.dragging||!t.initialX||!t.initialY)return Object(y.a)({},t);var e=Object(y.a)({},t.widgets[t.dragging]);e.x=e.x+n-t.initialX,e.y=e.y+i-t.initialY;var o=Object.values(t.widgets).filter((function(e){return"arrow"===e.type&&(e.start===t.dragging||e.end===t.dragging)})).reduce((function(n,i){var o=i,a=t.widgets[o.start||""],c=o.points[0],h=o.points[1];if(o.end===t.dragging&&("right"===c.type&&(c.x+10<h.x?o.points[1]={type:"left",x:e.x,y:e.y+e.height/2}:c.y+10<h.y?(o.points[0]={type:"bottom",x:a.x+a.width/2,y:a.y+a.height},o.points[1]={type:"top",x:e.x+e.width/2,y:e.y}):(o.points[0]={type:"top",x:a.x+a.width/2,y:a.y},o.points[1]={type:"bottom",x:e.x+e.width/2,y:e.y+e.height})),"left"===c.type&&(c.x-10<h.x?o.points[1]={type:"right",x:e.x+e.width,y:e.y+e.height/2}:c.y+10<h.y?(o.points[0]={type:"bottom",x:a.x+a.width/2,y:a.y+a.height},o.points[1]={type:"top",x:e.x+e.width/2,y:e.y}):(o.points[0]={type:"top",x:a.x+a.width/2,y:a.y},o.points[1]={type:"bottom",x:e.x+e.width/2,y:e.y+e.height})),"bottom"===c.type&&(c.y+10<h.y?o.points[1]={type:"top",x:e.x+e.width/2,y:e.y}:c.x+10<h.x?(o.points[0]={type:"right",x:a.x+a.width,y:a.y+a.height/2},o.points[1]={type:"left",x:e.x,y:e.y+e.height/2}):(o.points[0]={type:"left",x:a.x,y:a.y+a.width/2},o.points[1]={type:"right",x:e.x+e.width,y:e.y+e.height/2})),"top"===c.type&&(c.y-10>h.y?o.points[1]={type:"bottom",x:e.x+e.width/2,y:e.y+e.height}:c.x+10<h.x?(o.points[0]={type:"right",x:a.x+a.width,y:a.y+a.height/2},o.points[1]={type:"left",x:e.x,y:e.y+e.height/2}):(o.points[0]={type:"left",x:a.x,y:a.y+a.width/2},o.points[1]={type:"right",x:e.x+e.width,y:e.y+e.height/2}))),o.start===t.dragging){var s=t.widgets[o.end||""];"right"===c.type&&(c.x+10<h.x?o.points[0]={type:"right",x:e.x+e.width,y:e.y+e.height/2}:c.y+10<h.y?(o.points[0]={type:"bottom",x:e.x+e.width/2,y:e.y+e.height},o.points[1]={type:"top",x:s.x+s.width/2,y:s.y}):(o.points[0]={type:"top",x:e.x+e.width/2,y:e.y},o.points[1]={type:"bottom",x:s.x+s.width/2,y:s.y+s.height})),"left"===c.type&&(c.x-10>h.x?o.points[0]={type:"left",x:e.x,y:e.y+e.height/2}:c.y+10<h.y?(o.points[0]={type:"bottom",x:e.x+e.width/2,y:e.y+e.height},o.points[1]={type:"top",x:s.x+s.width/2,y:s.y}):(o.points[0]={type:"top",x:e.x+e.width/2,y:e.y},o.points[1]={type:"bottom",x:s.x+s.width/2,y:s.y+s.height})),"bottom"===c.type&&(c.y+10<h.y?o.points[0]={type:"bottom",x:e.x+e.width/2,y:e.y+e.height}:c.x+10<h.x?(o.points[0]={type:"right",x:e.x+e.width,y:e.y+e.height/2},o.points[1]={type:"left",x:s.x,y:s.y+s.height/2}):(o.points[0]={type:"left",x:e.x,y:e.y+e.width/2},o.points[1]={type:"right",x:s.x+s.width,y:s.y+s.height/2})),"top"===c.type&&(c.y-10>h.y?o.points[0]={type:"top",x:e.x+e.width/2,y:e.y}:c.x+10<h.x?(o.points[0]={type:"right",x:e.x+e.width,y:e.y+e.height/2},o.points[1]={type:"left",x:s.x,y:s.y+s.height/2}):(o.points[0]={type:"left",x:e.x,y:e.y+e.width/2},o.points[1]={type:"right",x:s.x+s.width,y:s.y+s.height/2}))}return Object(y.a)(Object(y.a)({},n),{},Object(r.a)({},o.id,Object(y.a)({},o)))}),{});return{initialX:n,initialY:i,widgets:Object(y.a)(Object(y.a)({},t.widgets),{},Object(r.a)({},e.id,e),o)}}))},t.handleDragStart=function(e,n){var i=n.clientX,o=n.clientY;n.stopPropagation(),0===n.button&&t.setState({dragging:e,selected:e,initialX:i,initialY:o})},t.handleKeyDown=function(e){"Backspace"!==e.key&&"Delete"!==e.key||!t.state.selected||t.setState((function(t){var e=t.selected||"",n=t.widgets;return delete n[e],Object.values(n).forEach((function(t){"arrow"!==t.type||t.start!==e&&t.end!==e||delete n[t.id]})),Object(y.a)(Object(y.a)({},t),{},{selected:null,widgets:Object(y.a)({},n)})}))},t.handleMouseDown=function(){t.setState({selected:null})},t.handleMouseUp=function(e){t.setState({dragging:null})},t.handleRef=function(e){return t.ref=e},t}return Object(s.a)(n,[{key:"render",value:function(){var t=this,e=this.state,n=e.cursor,i=e.selected,a=e.widgets;return o.a.createElement("div",{style:{cursor:n},className:"App",tabIndex:1,onDoubleClick:this.handleDoubleClick,onKeyDown:this.handleKeyDown,onMouseMove:this.handleDrag,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,ref:this.handleRef},Object.values(a).map((function(e){return"sticky"===e.type?o.a.createElement(p,{cursor:n,onContextMenu:t.handleContextMenu,onDragStart:t.handleDragStart,selected:i===e.id,widget:e,key:e.id}):"arrow"===e.type?o.a.createElement(w,{widget:e,key:e.id}):null})))}}]),n}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(f,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}],[[10,1,2]]]);
//# sourceMappingURL=main.d357e80a.chunk.js.map