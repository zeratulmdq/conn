(this.webpackJsonpdiagraming=this.webpackJsonpdiagraming||[]).push([[0],[,,,,,,,,function(t,e,n){},,,function(t,e,n){t.exports=n(19)},,,,,function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var i=n(1),a=n.n(i),o=n(9),r=n.n(o),s=(n(16),n(10)),c=n(2),d=n(0),l=n(3),h=n(4),u=n(6),g=n(5),p=(n(17),n(8),function(t){Object(u.a)(n,t);var e=Object(g.a)(n);function n(){var t;Object(l.a)(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))).dragging=!1,t.initialX=0,t.initialY=0,t.handleDragStart=function(e){var n=t.props,i=n.onDragStart,a=n.widget,o=n.cursor,r=n.onMouseDown;"crosshair"===o?r(a.id,e):i(a.id,e)},t.handleMouseUp=function(e){var n=t.props,i=n.onMouseUp,a=n.cursor,o=n.widget;"crosshair"===a&&i(o.id,e)},t.handleMouseHover=function(e){var n=t.props;(0,n.onMouseHover)(n.widget.id,e)},t.handleMouseLeave=function(e){var n=t.props;(0,n.onMouseLeave)(n.widget.id,e)},t}return Object(h.a)(n,[{key:"render",value:function(){var t=this.props,e=t.cursor,n=t.selected,i=t.widget,o=i.x,r=i.y,s=i.width,c=i.height;return a.a.createElement("div",{onMouseUp:this.handleMouseUp,onMouseDown:this.handleDragStart,onMouseMove:this.handleMouseHover,onMouseLeave:this.handleMouseLeave,style:{top:r,left:o,width:s,height:c,cursor:"crosshair"===e?"crosshair":"pointer",border:n?"2px solid blue":"none"},className:"Sticky",id:"auto"},a.a.createElement("div",{className:"snapping-point top",style:{top:-15,left:s/2-15,width:30,height:30},id:"top"}),a.a.createElement("div",{className:"snapping-point right",style:{top:c/2-15,left:s-15,width:30,height:30},id:"right"}),a.a.createElement("div",{className:"snapping-point bottom",style:{top:c-15,left:s/2-15,width:30,height:30},id:"bottom"}),a.a.createElement("div",{className:"snapping-point left",style:{top:c/2-15,left:-15,width:30,height:30},id:"left"}))}}]),n}(a.a.Component)),y=(n(18),function(t){Object(u.a)(n,t);var e=Object(g.a)(n);function n(){var t;Object(l.a)(this,n);for(var i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))).state={direction:"other",pointerEventsEnabled:!1},t.setDirection=function(){var e=t.getPoints(),n=e.start,i=e.end,a="right"===n.type||"left"===n.type;a!==("right"===i.type||"left"===i.type)&&t.setState({direction:"other"}),t.setState({direction:a?"vertical":"horizontal"})},t.getPoints=function(){var e=t.props.widget.points;return{start:e[0],end:e[1]}},t.enablePointerEvents=function(){t.state.pointerEventsEnabled||(console.log("enable pointer events"),t.setState({pointerEventsEnabled:!0}))},t.disablePointerEvents=function(){t.state.pointerEventsEnabled&&(console.log("disable pointer events"),t.setState({pointerEventsEnabled:!1}))},t.connectionDot=function(e,n,i,o){return a.a.createElement("circle",{key:i,cx:"".concat(e),cy:"".concat(n),r:"5",stroke:o?"black":"#1c7ff9",fill:o?"white":"#1c7ff9",onMouseDown:function(e){var n=t.props;(0,n.onDragPointStart)(n.widget.id,e,!!o)}})},t.handleMouseMove=function(e){var n=e.clientX,i=e.clientY;if(t.setDirection(),t.state.pointerEventsEnabled&&"other"!==t.state.direction){var a=t.getPoints(),o=a.start,r=a.end;if("vertical"!==t.state.direction){var s=Math.min(o.y,r.y),c=Math.max(o.y,r.y);s<i-10&&c>i+10&&t.state.y!==i&&t.setState({y:i})}else{var d=Math.min(o.x,r.x),l=Math.max(o.x,r.x);d<n-10&&l>n+10&&t.state.x!==n&&t.setState({x:n})}}},t.pathGenerator=function(e,n,i,o,r){var s=e[0],c=e[1],d="right"===s.type||"left"===s.type,l="right"===c.type||"left"===c.type;if(d&&s.y===c.y||!d&&s.x===c.x){var h="M ".concat(s.x," ").concat(s.y," L ").concat(c.x," ").concat(c.y);return[t.connectionDot(s.x,s.y,"0",!0),a.a.createElement("path",{d:h,stroke:"black",strokeWidth:"2",fill:"none",key:"1"}),t.connectionDot(c.x,c.y,"2")]}if(d!==l){var u="".concat(s.x," ").concat(s.y),g=d?"".concat(c.x," ").concat(s.y):"".concat(s.x," ").concat(c.y),p="".concat(c.x," ").concat(c.y),y="M ".concat(u," L ").concat(g),v="M ".concat(g," L ").concat(p);return[t.connectionDot(s.x,s.y,"0",!0),a.a.createElement("path",{d:y,stroke:"black",strokeWidth:"2",fill:"none",key:"1"}),a.a.createElement("path",{d:v,stroke:"black",strokeWidth:"2",fill:"none",key:"2"}),t.connectionDot(c.x,c.y,"3")]}var f=d?(c.x-s.x)/2:(c.y-s.y)/2,w=d&&o?o:!d&&r?r:d?s.x+f:s.y+f;if(n){var b="manyToOne"===n.type?c:s;n.convergenceSide===b.type&&(w=d&&o?o:!d&&r?r:n.position)}var x="".concat(s.x," ").concat(s.y),O=d?"".concat(w," ").concat(s.y):" ".concat(s.x," ").concat(w),j=d?"".concat(w," ").concat(c.y):" ".concat(c.x," ").concat(w),m="".concat(c.x," ").concat(c.y),k="M ".concat(x," L ").concat(O),S="M ".concat(O," L ").concat(j),M="M ".concat(j," L ").concat(m),P=d?"ew-resize":"ns-resize";return[t.connectionDot(s.x,s.y,"0",!0),a.a.createElement("path",{d:k,stroke:"black",strokeWidth:"2",fill:"none",key:"1"}),a.a.createElement("path",{key:"2",d:S,stroke:"black",strokeWidth:"2",fill:"none",style:{cursor:P,pointerEvents:"auto"},onMouseDown:i}),a.a.createElement("path",{d:M,stroke:"black",strokeWidth:"2",fill:"none",key:"3"}),t.connectionDot(c.x,c.y,"4")]},t}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.setDirection()}},{key:"componentDidUpdate",value:function(){var t=this.getPoints(),e=t.start,n=t.end;if(this.state.x&&"vertical"===this.state.direction){var i=this.state.x-e.x,a=this.state.x-n.x;(i>0&&a>0||i<0&&a<0)&&this.setState({x:void 0})}if(this.state.y&&"horizontal"===this.state.direction){var o=this.state.y-e.y,r=this.state.y-n.y;(o>0&&r>0||o<0&&r<0)&&this.setState({y:void 0})}}},{key:"render",value:function(){var t=this.pathGenerator(this.props.widget.points,this.props.widget.chartBranch,this.enablePointerEvents,this.state.x,this.state.y);return a.a.createElement("svg",{style:{position:"absolute",top:0,left:0,pointerEvents:this.state.pointerEventsEnabled?"auto":"none"},xmlns:"http://www.w3.org/2000/svg",version:"1.1",className:"Arrow",onMouseUp:this.disablePointerEvents,onMouseMove:this.handleMouseMove},t)}}]),n}(a.a.PureComponent)),v=function(t){Object(u.a)(n,t);var e=Object(g.a)(n);function n(){var t;Object(l.a)(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))).state={checked:!1},t.handleOnChange=function(e){t.setState((function(e){var n=!e.checked;return t.props.onCheckedChange(n),{checked:n}}))},t}return Object(h.a)(n,[{key:"render",value:function(){return a.a.createElement("div",{style:{height:"auto"}},a.a.createElement("label",null,a.a.createElement("input",{type:"checkbox",style:{width:15,height:15},onChange:this.handleOnChange,defaultChecked:this.state.checked}),this.props.label))}}]),n}(a.a.PureComponent),f=n(21),w=function(t){var e,n;return{id:f.a(),height:null!==(e=t.height)&&void 0!==e?e:100,width:null!==(n=t.width)&&void 0!==n?n:100,type:"sticky",x:(t.x||0)-50,y:(t.y||0)-50}},b=function(t){return{id:f.a(),height:0,width:0,type:"arrow",x:(t.x||0)-25,y:(t.y||0)-25,start:t.start||null,end:t.end||null,points:[],arrowType:t.arrowType||"initial",chartBranch:null,initialIsHorizontal:t.initialIsHorizontal||!0}},x=function(t){return"left"===t||"right"===t?"horizontal":"vertical"},O={position:"absolute",top:0,width:"auto",height:"auto",borderStyle:"solid",backgroundColor:"lightgray",padding:10},j=function(t){Object(u.a)(n,t);var e=Object(g.a)(n);function n(){var t;Object(l.a)(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))).ref=null,t.state={settings:{stickToConvergentWidgetSide:!1},cursor:"auto",dragging:null,initialId:null,endId:null,selected:null,widgets:{}},t.mousePosition=null,t.mouseOverSticky=!1,t.handleArrowPointDragStart=function(e,n,i){if(i){var a=t.state.widgets[e].end;t.setState((function(t){return Object(d.a)(Object(d.a)({},t),{},{cursor:"crosshair",dragging:[e],endId:a,initialId:null,widgets:Object(d.a)(Object(d.a)({},t.widgets),{},Object(c.a)({},e,Object(d.a)(Object(d.a)({},t.widgets[e]),{},{start:null})))})}))}else{var o=t.state.widgets[e].start;t.setState((function(t){return Object(d.a)(Object(d.a)({},t),{},{cursor:"crosshair",dragging:[e],initialId:o,endId:null,widgets:Object(d.a)(Object(d.a)({},t.widgets),{},Object(c.a)({},e,Object(d.a)(Object(d.a)({},t.widgets[e]),{},{end:null})))})}))}},t.handleStickyMouseDown=function(e,n){if("crosshair"===t.state.cursor)if(t.state.dragging);else{var i={x:n.clientX,y:n.clientY};t.setState((function(n){var a=Object(d.a)({},b({start:e,end:null}));return t.updateDisconnectedArrow(a,n.widgets,i),Object(d.a)(Object(d.a)({},n),{},{initialId:e,widgets:Object(d.a)(Object(d.a)({},n.widgets),{},Object(c.a)({},a.id,a)),dragging:[a.id]})}))}},t.handleStickyMouseUp=function(e,n){t.state.initialId!==e&&t.state.endId!==e?"crosshair"===t.state.cursor&&t.setState((function(t){var n,i;if(!t.dragging)return Object(d.a)({},t);var a=Object(d.a)({},t.widgets[t.dragging[0]]),o=t.widgets[null!==(n=a.start)&&void 0!==n?n:e],r=t.widgets[null!==(i=a.end)&&void 0!==i?i:e];if(Object.values(t.widgets).find((function(t){return"arrow"===t.type&&t.id!==a.id&&t.start===o.id&&t.end===r.id})))return Object(d.a)({},t);var s=Math.abs((o.x-r.x)/(o.y-r.y))>1;return a.start=o.id,a.end=r.id,a.initialIsHorizontal=s,Object(d.a)(Object(d.a)({},t),{},{cursor:"auto",dragging:null,initialId:null,endId:null,widgets:Object(d.a)(Object(d.a)({},t.widgets),{},Object(c.a)({},a.id,a))})})):t.cancelArrowCreation()},t.handleDoubleClick=function(e){var n=e.ctrlKey?150:100,i=w({x:e.clientX,y:e.clientY,width:n});t.setState((function(t){return{selected:[i.id],widgets:Object(d.a)(Object(d.a)({},t.widgets),{},Object(c.a)({},i.id,i))}}))},t.handleDrag=function(e){var n=t.mousePosition?e.clientX-t.mousePosition.x:e.clientX,i=t.mousePosition?e.clientY-t.mousePosition.y:e.clientY;t.mousePosition={x:e.clientX,y:e.clientY};var a=t.state,o=a.dragging,r=a.widgets;if(o){var s=o.map((function(t){return r[t]}));if(s.length>1||"sticky"===s[0].type){var l=Object.values(r).filter((function(t){return"arrow"===t.type&&o&&(t.start&&o.includes(t.start)||t.end&&o.includes(t.end))})).reduce((function(e,a){var s=a;return t.updateArrow(s,r),o&&s.start&&o.includes(s.start)&&s.end&&o.includes(s.end)&&s.chartBranch&&"oneToOne"===s.chartBranch.type&&(s.chartBranch.position=s.chartBranch.position+(s.initialIsHorizontal?n:i)),Object(d.a)(Object(d.a)({},e),{},Object(c.a)({},s.id,Object(d.a)({},s)))}),{}),h=s.reduce((function(t,e){return Object(d.a)(Object(d.a)({},t),{},Object(c.a)({},e.id,Object(d.a)(Object(d.a)({},e),{},{x:e.x+n,y:e.y+i})))}),{});t.setState({widgets:Object(d.a)(Object(d.a)(Object(d.a)({},r),h),l)})}else if("arrow"===s[0].type&&!t.mouseOverSticky){var u=Object(d.a)({},s[0]);u.end&&u.start||t.updateDisconnectedArrow(u,r,t.mousePosition),t.setState({widgets:Object(d.a)(Object(d.a)({},r),{},Object(c.a)({},u.id,u))})}}},t.handleMouseHoverSticky=function(e,n){t.mouseOverSticky=!0;var i=n.target.id,a=t.state,o=a.dragging,r=a.widgets;if(o){var s=o.map((function(t){return r[t]}));if(1===s.length&&"arrow"===s[0].type&&s[0].start!==e&&s[0].end!==e){var l,h,u=Object(d.a)({},s[0]),g=!s[0].start;u.start=null!==(l=u.start)&&void 0!==l?l:e,u.end=null!==(h=u.end)&&void 0!==h?h:e,t.updateArrow(u,r,i,g);var p=Object(d.a)(Object(d.a)({},r),{},Object(c.a)({},u.id,u));t.setState({widgets:p})}}},t.handleMouseLeaveSticky=function(e,n){t.mouseOverSticky=!1;var i=t.state,a=i.dragging,o=i.widgets;if(a){var r=a.map((function(t){return o[t]}));if(1===r.length&&"arrow"===r[0].type&&r[0].start&&r[0].end&&(r[0].start===e||r[0].end===e)){var s=Object(d.a)({},r[0]);s.start=s.start===e?null:s.start,s.end=s.end===e?null:s.end,t.updateDisconnectedArrow(s,o,{x:n.clientX,y:n.clientY}),t.setState({widgets:Object(d.a)(Object(d.a)({},o),{},Object(c.a)({},s.id,s))})}}},t.handleWidgetDragStart=function(e,n){var i=n.shiftKey;if(n.stopPropagation(),0===n.button&&!t.state.dragging){var a=t.state.selected&&(t.state.selected.includes(e)||i)?t.state.selected.includes(e)?t.state.selected:[].concat(Object(s.a)(t.state.selected),[e]):[e],o=t.state.selected&&t.state.selected.includes(e)?t.state.selected:[e];t.setState({dragging:o,selected:a})}},t.handleKeyDown=function(e){if("c"===e.key){var n="auto"===t.state.cursor?"crosshair":"auto";"auto"===n?t.cancelArrowCreation():t.setState({cursor:n})}"Backspace"!==e.key&&"Delete"!==e.key||!t.state.selected||t.setState((function(t){var e=t.selected||null,n=t.widgets;return null===e||void 0===e||e.forEach((function(t){Object.values(n).forEach((function(e){"arrow"!==e.type||e.start!==t&&e.end!==t||delete n[e.id]})),delete n[t]})),Object(d.a)(Object(d.a)({},t),{},{selected:null,widgets:Object(d.a)({},n)})}))},t.handleMouseDown=function(){t.setState({selected:null})},t.handleMouseUp=function(e){var n=t.state.dragging&&t.state.dragging.map((function(e){return t.state.widgets[e]}));n&&1===n.length&&"arrow"===n[0].type?(t.state.initialId||t.state.endId)&&t.cancelArrowCreation():t.setState((function(e){if(!e.dragging)return Object(d.a)({},e);var n=Object.values(e.widgets).filter((function(t){var n,i;return"arrow"===t.type&&(t.start&&(null===(n=e.dragging)||void 0===n?void 0:n.includes(t.start))||t.end&&(null===(i=e.dragging)||void 0===i?void 0:i.includes(t.end)))})).map((function(t){return t})).reduce((function(n,i){if(!e.settings.stickToConvergentWidgetSide||"chartBranch"!==i.arrowType){if(t.isChartSideArrow(i,e.widgets)){var a=e.widgets[i.start||""],o=e.widgets[i.end||""];t.updateArrowChartSide(i,a,o)&&(i.arrowType="chartSide")}t.setArrowChartBranch(i,e.widgets,!1)}return i.initialIsHorizontal="left"===i.points[0].type||"right"===i.points[0].type,Object(d.a)(Object(d.a)({},n),{},Object(c.a)({},i.id,Object(d.a)({},i)))}),{});return{dragging:null,widgets:Object(d.a)(Object(d.a)({},e.widgets),n)}}))},t.handleRef=function(e){t.ref=e,t.ref&&t.ref.focus()},t}return Object(h.a)(n,[{key:"cancelArrowCreation",value:function(){this.setState((function(t){if(t.dragging&&t.dragging.length){var e=Object(d.a)({},t.widgets[t.dragging[0]]);if("arrow"===e.type){var n=t.widgets;return delete n[e.id],Object(d.a)(Object(d.a)({},t),{},{dragging:null,initialId:null,endId:null,cursor:"auto",widgets:Object(d.a)({},n)})}}return Object(d.a)(Object(d.a)({},t),{},{dragging:null,initialId:null,endId:null,cursor:"auto"})}))}},{key:"setArrowChartBranch",value:function(t,e,n){if(!this.state.settings.stickToConvergentWidgetSide&&t.chartBranch&&("manyToOne"===t.chartBranch.type?t.points[1]:t.points[0]).type===t.chartBranch.convergenceSide)return;var i=this.getSharedChartBranchArrow(t,e);if(n&&!i||t.startPoint||t.endPoint)return t.chartBranch=null,console.log("arrow.chartBranch = null"),console.log(t.startPoint),void console.log(t.endPoint);if(n||(t.arrowType="chartBranch",console.log('arrow.arrowType = "chartBranch"')),i&&i.chartBranch)"oneToOne"===i.chartBranch.type&&(i.start===t.start?(i.chartBranch.type="oneToMany",i.chartBranch.convergenceSide=t.points[0].type):(i.chartBranch.type="manyToOne",i.chartBranch.convergenceSide=t.points[1].type)),t.chartBranch=Object.assign({},i.chartBranch);else{console.log("new lonely charBranch arrow");var a={position:0,convergenceSide:t.points[0].type,type:"oneToOne"};"horizontal"===x(a.convergenceSide)?a.position=t.points[0].x+(t.points[1].x-t.points[0].x)/2:a.position=t.points[0].y+(t.points[1].y-t.points[0].y)/2,t.chartBranch=a}}},{key:"getSharedChartBranchArrow",value:function(t,e){var n=Object.values(e).filter((function(e){return"arrow"===e.type&&e.id!==t.id&&"chartBranch"===e.arrowType&&e.chartBranch&&(e.start===t.start&&e.points[0].type===t.points[0].type||e.end===t.end&&e.points[1].type===t.points[1].type)})).map((function(t){return t}));return n.length>0?n[0]:null}},{key:"updateDisconnectedArrow",value:function(t,e,n){var i=e[t.start||""],a=e[t.end||""],o=i||a,r=i?{x:i.x,y:i.y}:n,s=a?{x:a.x,y:a.y}:n,c=[{type:"right",x:0,y:0},{type:"left",x:1,y:0}];Math.abs((r.x-s.x)/(r.y-s.y))>1?o.x+o.width+10<n.x?(c[0].type=i?"right":"left",c[1].type=i?"left":"right"):(c[0].type=i?"left":"right",c[1].type=i?"right":"left"):o.y+o.height+10<n.y?(c[0].type=i?"bottom":"top",c[1].type=i?"top":"bottom"):(c[0].type=i?"top":"bottom",c[1].type=i?"bottom":"top"),c[0]=i?this.getWidgetSideMidPosition(c[0],i):Object(d.a)(Object(d.a)({},c[0]),{},{x:n.x,y:n.y}),c[1]=a?this.getWidgetSideMidPosition(c[1],a):Object(d.a)(Object(d.a)({},c[1]),{},{x:n.x,y:n.y}),t.points=c}},{key:"updateArrow",value:function(t,e,n,i){var a=e[t.start||""],o=e[t.end||""],r=[{type:"right",x:0,y:0},{type:"left",x:1,y:0}];(2===t.points.length&&(r=t.points),this.state.settings.stickToConvergentWidgetSide&&"chartBranch"===t.arrowType)||(i&&n?t.startPoint="auto"!==n?n:null:n&&(t.endPoint="auto"!==n?n:null),Math.abs((a.x-o.x)/(a.y-o.y))>1?a.x+a.width+10<o.x?(r[0].type=t.startPoint||"right",r[1].type=t.endPoint||"left"):(r[0].type=t.startPoint||"left",r[1].type=t.endPoint||"right"):a.y+a.height+10<o.y?(r[0].type=t.startPoint||"bottom",r[1].type=t.endPoint||"top"):(r[0].type=t.startPoint||"top",r[1].type=t.endPoint||"bottom"),r[0]=this.getWidgetSideMidPosition(r[0],a),r[1]=this.getWidgetSideMidPosition(r[1],o),t.points=r,this.isChartSideArrow(t,e)&&this.updateArrowChartSide(t,a,o),this.setArrowChartBranch(t,e,!0));if(t.chartBranch){console.log("CHART BRANCH"),console.log("endPoint: ",t.endPoint),console.log("point: ",t.points[1]);var s="manyToOne"===t.chartBranch.type,c=s?t.points[1]:t.points[0],d=s?t.points[0]:t.points[1],l=s?o:a,h=s?a:o;c=this.getWidgetSideMidPosition(c,l),d=this.getWidgetSideMidPosition(d,h),"horizontal"===x(t.chartBranch.convergenceSide)?t.chartBranch.position>=h.x&&t.chartBranch.position<=h.x+h.width?(d.x=t.chartBranch.position,d.y=h.y+h.height/2>c.y?h.y:h.y+h.height):(d.type=t.chartBranch.position<h.x?"left":"right",d=this.getWidgetSideMidPosition(d,h)):t.chartBranch.position>=h.y&&t.chartBranch.position<=h.y+h.height?(d.x=h.x+h.width/2>c.x?h.x:h.x+h.width,d.y=t.chartBranch.position):(d.type=t.chartBranch.position<h.y?"top":"bottom",d=this.getWidgetSideMidPosition(d,h)),t.points[0]=s?d:c,t.points[1]=s?c:d}}},{key:"isChartSideArrow",value:function(t,e){if(!this.getSharedChartBranchArrow(t,e))return t.initialIsHorizontal&&("top"===t.points[0].type||"bottom"===t.points[0].type)||!t.initialIsHorizontal&&("left"===t.points[0].type||"right"===t.points[0].type)}},{key:"updateArrowChartSide",value:function(t,e,n){if(t.initialIsHorizontal){var i=this.getIntersectionMiddle(e.x,e.width,n.x,n.width);if(i)return t.points[0].x=i,t.points[1].x=i,!0}else{var a=this.getIntersectionMiddle(e.y,e.height,n.y,n.height);if(a)return t.points[0].y=a,t.points[1].y=a,!0}t.initialIsHorizontal?t.points[0].type=n.x>e.x+e.width/2?"right":"left":t.points[0].type=n.y>e.y+e.height/2?"bottom":"top",t.points[0]=this.getWidgetSideMidPosition(t.points[0],e);var o=e.x+e.width/2,r=e.y+e.height/2,s=n.x+n.width/2,c=n.y+n.height/2,d=Math.abs(o-s)-(e.width/2+n.width/2),l=Math.abs(r-c)-(e.height/2+n.height/2);if(t.initialIsHorizontal?d<=10:l<=10)if(t.initialIsHorizontal){t.points[1].type=n.y>t.points[0].y?"top":"bottom";var h=e.width/2+Math.max(d+10,20);t.points[1].x=o+("right"===t.points[0].type?h:-h),t.points[1].y="top"===t.points[1].type?n.y:n.y+n.height}else{t.points[1].type=n.x>t.points[0].x?"left":"right";var u=e.height/2+Math.max(l+10,20);t.points[1].x="left"===t.points[1].type?n.x:n.x+n.width,t.points[1].y=r+("bottom"===t.points[0].type?u:-u)}else t.initialIsHorizontal?t.points[1].type="right"===t.points[0].type?"left":"right":t.points[1].type="bottom"===t.points[0].type?"top":"bottom",t.points[1]=this.getWidgetSideMidPosition(t.points[1],n);return!1}},{key:"widgetsTooClose",value:function(t,e,n,i){var a=t.x+t.width/2,o=t.y+t.height/2,r=e.x+e.width/2,s=e.y+e.height/2;return i?Math.abs(a-r)-(t.width/2+e.width/2)<=n:Math.abs(o-s)-(t.height/2+e.height/2)<=n}},{key:"getIntersectionMiddle",value:function(t,e,n,i){var a=t+e,o=n+i;if(t===n&&a===o||t>n&&t<o){var r=o-t;return r<=20?null:t+r/2}if(a>n&&a<o){var s=a-n;return s<=20?null:a-s/2}return null}},{key:"between",value:function(t,e,n){return t>e&&t<n}},{key:"getWidgetSideMidPosition",value:function(t,e){var n={type:t.type,x:0,y:0};switch(t.type){case"top":n.x=e.x+e.width/2,n.y=e.y;break;case"right":n.x=e.x+e.width,n.y=e.y+e.height/2;break;case"bottom":n.x=e.x+e.width/2,n.y=e.y+e.height;break;case"left":n.x=e.x,n.y=e.y+e.height/2}return n}},{key:"render",value:function(){var t=this,e=this.state,n=e.cursor,i=e.selected,o=e.widgets;return a.a.createElement("div",null,a.a.createElement("div",{id:"canvas",style:{cursor:n},className:"App ".concat("crosshair"===n?"connector-mode":""),tabIndex:1,onDoubleClick:this.handleDoubleClick,onKeyDown:this.handleKeyDown,onMouseMove:this.handleDrag,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,ref:this.handleRef},Object.values(o).map((function(e){return"sticky"===e.type?a.a.createElement(p,{cursor:n,onMouseDown:t.handleStickyMouseDown,onMouseUp:t.handleStickyMouseUp,onDragStart:t.handleWidgetDragStart,onMouseHover:t.handleMouseHoverSticky,onMouseLeave:t.handleMouseLeaveSticky,selected:!!(null===i||void 0===i?void 0:i.includes(e.id)),widget:e,key:e.id}):"arrow"===e.type?a.a.createElement(y,{widget:e,key:e.id,onDragPointStart:t.handleArrowPointDragStart}):null}))),a.a.createElement("div",{id:"settings",style:O},a.a.createElement(v,{label:"Stick To Convergent Widget Side",onCheckedChange:function(e){return t.setState({settings:{stickToConvergentWidgetSide:e}})}})))}}]),n}(a.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(j,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}],[[11,1,2]]]);
//# sourceMappingURL=main.2e680a22.chunk.js.map